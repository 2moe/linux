<!DOCTYPE html>
<html>

<head>
  <script type="text/javascript">
    const match_lang_slice = (lang, slice) => {
      if (slice !== "zh")
        return slice

      const region = lang.slice(-2).toUpperCase()
      switch (region) {
        case "HK":
        case "TW":
          return `${slice}-${region}`
        default:
          return slice
      }
    }

    const get_lang = () => {
      const language = navigator.language || navigator.languages[0]
      const slice = language.slice(0, 2).toLowerCase()

      const ava_lang = {
        zh: 1,
        de: 1,
        es: 1,
        ja: 1,
        fr: 1,
        it: 1,
        ko: 1,
        ru: 1,
        id: 1,
        pl: 1,
        pt: 1,
        cs: 1,
        default: "en",
      }

      return `${ava_lang[slice] === 1
        ? match_lang_slice(language, slice)
        : ava_lang["default"]
        }`
    }

    const loc = self.location
    loc.replace(`${loc.origin}/${get_lang()}/prologue.html`)
  </script>
</head>

</html>